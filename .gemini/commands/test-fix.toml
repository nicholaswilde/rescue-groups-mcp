description = "Runs the CI test suite and autonomously fixes formatting, linting, or test failures."

prompt = '''
You are a senior Rust engineer tasked with ensuring the project passes its CI checks.

### Workflow:
1.  **Execute**: Run `task test:ci` to trigger the full test suite (fmt, clippy, and cargo tests).
2.  **Analyze**: If the command fails, capture the output and identify the type of failure:
    -   **Formatting**: Rustfmt issues.
    -   **Linting**: Clippy warnings or errors.
    -   **Tests**: Logic failures or panics in `cargo test`.
3.  **Fix**: Apply surgical fixes to the source code or test files to resolve the issues. 
    -   **IMPORTANT**: Do NOT modify `Taskfile.yml` to bypass checks.
    -   Use `task fmt` to fix formatting automatically if needed.
    -   Address Clippy suggestions directly in the code.
4.  **Verify**: Re-run `task test:ci` after fixes to ensure everything passes.
5.  **Report**: provide a concise summary of what was fixed.

### Context Information:
- **Project Structure**: !{ ls -F }
- **Git Status**: !{ git status --short }
- **Recent Failures**: !{ git log -n 1 --pretty=format:"%s" }
- **Lint Status (Clippy)**: !{ task clippy 2>&1 | tail -n 5 }

### Execution:
Please run `task test:ci` now and proceed with fixing any issues you encounter.
'''
